# $Id: PKGBUILD 181167 2013-04-02 06:48:57Z allan $
# Maintainer: Allan McRae <allan@archlinux.org>
# toolchain build order: linux-api-headers->glibc->binutils->gcc->binutils->glibc

# 03-05-2013 Raspi-Build: Maciej Szeptuch (Neverous) <neverous@neverous.info>
#   - Kernel 3.9 from http://github.com/raspberrypi/linux branch rpi-3.9.y

pkgname=raspberrypi-linux-api-headers
pkgver=3.9.0
_basever=3.9
provides=("linux-api-headers=${pkgver}")
conflicts=('linux-api-headers')
replaces=('linux-api-headers')
pkgrel=1
pkgdesc="Kernel headers sanitized for use in userspace"
arch=('armv6zk')
url="http://www.gnu.org/software/libc"
license=('GPL2')
source=(raspberrypi-linux-3.9.tar.gz)

build() {
    cd ${srcdir}/linux
    make mrproper
    make headers_check
}

package() {
    cd ${srcdir}/linux
    make INSTALL_HDR_PATH=${pkgdir}/usr headers_install

    # use headers from libdrm
    rm -r ${pkgdir}/usr/include/drm

    # clean-up unnecessary files generated during install
    find ${pkgdir} \( -name .install -o -name ..install.cmd \) -delete
}

md5sums=('56e2e87cfbf6356f1f12b9bc4d365313')
